<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="koggiri.approval.mapper.ApprovalMapper">
	<cache />

	<select id="pay_tyselect" resultType="PayType">
		select pay_t_cd, pay_t_nm from pay_type
	</select>
	
	<select id="req_tyselect" resultType="ReqType">
		select req_t_cd, req_t_nm from req_type
	</select>
	
	<select id="leave_tyselect" resultType="LeaveType">
		select leave_t_cd, leave_t_nm from leave_type
	</select>
	
	<select id="einfo_select" resultType="Emp_infomation">
		select e.emp_id as emp_id, e.emp_nm as emp_nm, d.dept_nm as dept_nm, p.pos_nm as pos_nm from emp e inner join dept d
		on e.dept_id = d.dept_id
		inner join pos p
		on e.pos_id = p.pos_id
		and e.emp_id = 'k15010201'
	</select>

	<select id="approval_r_select" resultType="Approval">
		select a.app_id as app_id, a.draft_dt as draft_dt, at.app_type_nm as app_type_nm,
		       d.dept_nm as dept_nm, ed.emp_nm as drafter , ea.emp_nm as approver, ap.app_pro_nm as app_pro_nm 
		from approval a inner join app_type at
		on a.app_type_cd = at.app_type_cd
		inner join app_pro_type ap
		on a.app_pro_cd = ap.app_pro_cd
		inner join dept d
		on a.dept_id = d.dept_id
		inner join emp ed
		on a.draft_emp_id = ed.emp_id
		inner join emp ea
		on a.app_emp_id = ea.emp_id;
	</select>


</mapper>